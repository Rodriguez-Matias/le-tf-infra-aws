# Object File Shares

## Brief
Refer to this ticket: https://diligentrobots.atlassian.net/browse/BIN-31

## Instructions
1. Open variables.tf
2. Locate the line where the `usernames` list is
3. Add an entry to that list in order to onboard a new user / project
    1. For instance, "jane.doe" and "john.doe" can be added to the list as follows:
        ```
        usernames = [
          "jane.doe",
          "john.doe",
          #EOL#
        ]
        ```
    2. Entries on this list determine names of AWS resource that will be created (e.g. S3 bucket name, IAM user/policy/role name). Because of that, the only characters allowed are: lowercase letters, numbers, dots (.), and hyphens (-).
    3. The `#EOL#` mark at the end of the list could help with making this process more automated. The idea is to replace that mark using simple bash commands such as this one: `cat variables.tf | gsed 's/#EOL#/\"mike\",\n  #EOL#/'`
4. Run Terraform
    1. Run `leverage tf init` to initialize this layer (if necessary)
    2. Run `leverage tf plan` to evaluate the changes that will be made
    3. Run `leverage tf apply` to create/update/delete actual resources
5. After the last command succeeds, it should reveal the output of this layer
    1. Locate the user that was created; the one that matches the entry you added to the list
    2. Grab the AWS IAM programmatic credentials and the AWS IAM role that matches your entry. You will need *securely* share these with the actual user

# About the GPG key being used
There is a GPG key under `keys/machine.s3.demo` which is used to encrypt the programmatic access key secret that is generated by this layer.

